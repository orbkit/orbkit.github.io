

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Date and Time &mdash; orbkit 0.2.2 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/orbkit.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="orbkit 0.2.2 documentation" href="../../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> orbkit
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../general.html">General Aspects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quick.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gridbased/index.html">Grid-Based Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nongridbased/index.html">Non Grid-Based Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../adtutorials/index.html">Advanced Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../refs/index.html">Orbkit References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../licence.html">Licence Note</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../impressum.html">Impressum - Legal Notice</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">orbkit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
    <li>Date and Time</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/build/babel/docs/dates.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="date-and-time">
<span id="id1"></span><h1>Date and Time<a class="headerlink" href="#date-and-time" title="Permalink to this headline">¶</a></h1>
<p>When working with date and time information in Python, you commonly use the
classes <code class="docutils literal"><span class="pre">date</span></code>, <code class="docutils literal"><span class="pre">datetime</span></code> and/or <code class="docutils literal"><span class="pre">time</span></code> from the <cite>datetime</cite> package.
Babel provides functions for locale-specific formatting of those objects in its
<code class="docutils literal"><span class="pre">dates</span></code> module:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">babel.dates</span> <span class="kn">import</span> <span class="n">format_date</span><span class="p">,</span> <span class="n">format_datetime</span><span class="p">,</span> <span class="n">format_time</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
<span class="go">u&#39;Apr 1, 2007&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;de_DE&#39;</span><span class="p">)</span>
<span class="go">u&#39;01.04.2007&#39;</span>
</pre></div>
</div>
<p>As this example demonstrates, Babel will automatically choose a date format
that is appropriate for the requested locale.</p>
<p>The <code class="docutils literal"><span class="pre">format_*()</span></code> functions also accept an optional <code class="docutils literal"><span class="pre">format</span></code> argument, which
allows you to choose between one of four format variations:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">short</span></code>,</li>
<li><code class="docutils literal"><span class="pre">medium</span></code> (the default),</li>
<li><code class="docutils literal"><span class="pre">long</span></code>, and</li>
<li><code class="docutils literal"><span class="pre">full</span></code>.</li>
</ul>
</div></blockquote>
<p>For example:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
<span class="go">u&#39;4/1/07&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;long&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
<span class="go">u&#39;April 1, 2007&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
<span class="go">u&#39;Sunday, April 1, 2007&#39;</span>
</pre></div>
</div>
<div class="section" id="core-time-concepts">
<h2>Core Time Concepts<a class="headerlink" href="#core-time-concepts" title="Permalink to this headline">¶</a></h2>
<p>Working with dates and time can be a complicated thing.  Babel attempts to
simplify working with them by making some decisions for you.  Python&#8217;s
datetime module has different ways to deal with times and dates: naive and
timezone-aware datetime objects.</p>
<p>Babel generally recommends you to store all your time in naive datetime
objects and treat them as UTC at all times.  This simplifies dealing with
time a lot because otherwise you can get into the hairy situation where
you are dealing with datetime objects of different timezones.  That is
tricky because there are situations where time can be ambiguous.  This is
usually the case when dealing with dates around timezone transitions.  The
most common case of timezone transition is changes between daylight saving
time and standard time.</p>
<p>As such we recommend to always use UTC internally and only reformat to
local time when returning dates to users.  At that point the timezone the
user has selected can usually be established and Babel can automatically
rebase the time for you.</p>
<p>To get the current time use the <code class="xref py py-meth docutils literal"><span class="pre">utcnow()</span></code> method
of the <code class="xref py py-class docutils literal"><span class="pre">datetime</span></code> object.  It will return a naive
<code class="xref py py-class docutils literal"><span class="pre">datetime</span></code> object in UTC.</p>
<p>For more information about timezones see <a class="reference internal" href="#timezone-support"><span class="std std-ref">Time-zone Support</span></a>.</p>
</div>
<div class="section" id="pattern-syntax">
<h2>Pattern Syntax<a class="headerlink" href="#pattern-syntax" title="Permalink to this headline">¶</a></h2>
<p>While Babel makes it simple to use the appropriate date/time format for a given
locale, you can also force it to use custom patterns. Note that Babel uses
different patterns for specifying number and date formats compared to the
Python equivalents (such as <code class="docutils literal"><span class="pre">time.strftime()</span></code>), which have mostly been
inherited from C and POSIX. The patterns used in Babel are based on the
<a class="reference external" href="http://unicode.org/reports/tr35/#Date_Format_Patterns">Locale Data Markup Language specification</a> (LDML), which defines them as
follows:</p>
<blockquote>
<div><p>A date/time pattern is a string of characters, where specific strings of
characters are replaced with date and time data from a calendar when formatting
or used to generate data for a calendar when parsing. [â¦]</p>
<p>Characters may be used multiple times. For example, if <code class="docutils literal"><span class="pre">y</span></code> is used for the
year, <code class="docutils literal"><span class="pre">yy</span></code> might produce &#8220;99&#8221;, whereas <code class="docutils literal"><span class="pre">yyyy</span></code> produces &#8220;1999&#8221;. For most
numerical fields, the number of characters specifies the field width. For
example, if <code class="docutils literal"><span class="pre">h</span></code> is the hour, <code class="docutils literal"><span class="pre">h</span></code> might produce &#8220;5&#8221;, but <code class="docutils literal"><span class="pre">hh</span></code> produces
&#8220;05&#8221;. For some characters, the count specifies whether an abbreviated or full
form should be used [â¦]</p>
<p>Two single quotes represent a literal single quote, either inside or outside
single quotes. Text within single quotes is not interpreted in any way (except
for two adjacent single quotes).</p>
</div></blockquote>
<p>For example:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">date</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s2">&quot;EEE, MMM d, &#39;&#39;yy&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
<span class="go">u&quot;Sun, Apr 1, &#39;07&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_date</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s2">&quot;EEEE, d.M.yyyy&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;de&#39;</span><span class="p">)</span>
<span class="go">u&#39;Sonntag, 1.4.2007&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_time</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s2">&quot;hh &#39;o&#39;&#39;clock&#39; a&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
<span class="go">u&quot;03 o&#39;clock PM&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_time</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s1">&#39;H:mm a&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;de&#39;</span><span class="p">)</span>
<span class="go">u&#39;15:30 nachm.&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_datetime</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="s2">&quot;yyyyy.MMMM.dd GGG hh:mm a&quot;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
<span class="go">u&#39;02007.April.01 AD 03:30 PM&#39;</span>
</pre></div>
</div>
<p>The syntax for custom datetime format patterns is described in detail in the
the <a class="reference external" href="http://unicode.org/reports/tr35/#Date_Format_Patterns">Locale Data Markup Language specification</a>. The following table is just a
relatively brief overview.</p>
<blockquote>
<div></div></blockquote>
<div class="section" id="date-fields">
<h3>Date Fields<a class="headerlink" href="#date-fields" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="11%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Symbol</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Era</td>
<td><code class="docutils literal"><span class="pre">G</span></code></td>
<td>Replaced with the era string for the current date. One
to three letters for the abbreviated form, four
lettersfor the long form, five for the narrow form</td>
</tr>
<tr class="row-odd"><td rowspan="3">Year</td>
<td><code class="docutils literal"><span class="pre">y</span></code></td>
<td>Replaced by the year. Normally the length specifies
the padding, but for two letters it also specifies the
maximum length.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Y</span></code></td>
<td>Same as <code class="docutils literal"><span class="pre">y</span></code> but uses the ISO year-week calendar.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">u</span></code></td>
<td>??</td>
</tr>
<tr class="row-even"><td rowspan="2">Quarter</td>
<td><code class="docutils literal"><span class="pre">Q</span></code></td>
<td>Use one or two for the numerical quarter, three for
the abbreviation, or four for the full name.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">q</span></code></td>
<td>Use one or two for the numerical quarter, three for
the abbreviation, or four for the full name.</td>
</tr>
<tr class="row-even"><td rowspan="2">Month</td>
<td><code class="docutils literal"><span class="pre">M</span></code></td>
<td>Use one or two for the numerical month, three for the
abbreviation, or four for the full name, or five for
the narrow name.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">L</span></code></td>
<td>Use one or two for the numerical month, three for the
abbreviation, or four for the full name, or 5 for the
narrow name.</td>
</tr>
<tr class="row-even"><td rowspan="2">Week</td>
<td><code class="docutils literal"><span class="pre">w</span></code></td>
<td>Week of year.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">W</span></code></td>
<td>Week of month.</td>
</tr>
<tr class="row-even"><td rowspan="4">Day</td>
<td><code class="docutils literal"><span class="pre">d</span></code></td>
<td>Day of month.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">D</span></code></td>
<td>Day of year.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">F</span></code></td>
<td>Day of week in month.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">g</span></code></td>
<td>??</td>
</tr>
<tr class="row-even"><td rowspan="3">Week day</td>
<td><code class="docutils literal"><span class="pre">E</span></code></td>
<td>Day of week. Use one through three letters for the
short day, or four for the full name, or five for the
narrow name.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">e</span></code></td>
<td>Local day of week. Same as E except adds a numeric
value that will depend on the local starting day of
the week, using one or two letters.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">c</span></code></td>
<td>??</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="time-fields">
<h3>Time Fields<a class="headerlink" href="#time-fields" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="11%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Symbol</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Period</td>
<td><code class="docutils literal"><span class="pre">a</span></code></td>
<td>AM or PM</td>
</tr>
<tr class="row-odd"><td rowspan="4">Hour</td>
<td><code class="docutils literal"><span class="pre">h</span></code></td>
<td>Hour [1-12].</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">H</span></code></td>
<td>Hour [0-23].</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">K</span></code></td>
<td>Hour [0-11].</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">k</span></code></td>
<td>Hour [1-24].</td>
</tr>
<tr class="row-odd"><td>Minute</td>
<td><code class="docutils literal"><span class="pre">m</span></code></td>
<td>Use one or two for zero places padding.</td>
</tr>
<tr class="row-even"><td rowspan="3">Second</td>
<td><code class="docutils literal"><span class="pre">s</span></code></td>
<td>Use one or two for zero places padding.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">S</span></code></td>
<td>Fractional second, rounds to the count of letters.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">A</span></code></td>
<td>Milliseconds in day.</td>
</tr>
<tr class="row-odd"><td rowspan="4">Timezone</td>
<td><code class="docutils literal"><span class="pre">z</span></code></td>
<td>Use one to three letters for the short timezone or
four for the full name.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Z</span></code></td>
<td>Use one to three letters for RFC 822, four letters for
GMT format.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">v</span></code></td>
<td>Use one letter for short wall (generic) time, four for
long wall time.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">V</span></code></td>
<td>Same as <code class="docutils literal"><span class="pre">z</span></code>, except that timezone abbreviations
should be used regardless of whether they are in
common use by the locale.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="time-delta-formatting">
<h2>Time Delta Formatting<a class="headerlink" href="#time-delta-formatting" title="Permalink to this headline">¶</a></h2>
<p>In addition to providing functions for formatting localized dates and times,
the <code class="docutils literal"><span class="pre">babel.dates</span></code> module also provides a function to format the difference
between two times, called a &#8216;&#8217;time delta&#8217;&#8216;. These are usually represented as
<code class="docutils literal"><span class="pre">datetime.timedelta</span></code> objects in Python, and it&#8217;s also what you get when you
subtract one <code class="docutils literal"><span class="pre">datetime</span></code> object from an other.</p>
<p>The <code class="docutils literal"><span class="pre">format_timedelta</span></code> function takes a <code class="docutils literal"><span class="pre">timedelta</span></code> object and returns a
human-readable representation. This happens at the cost of precision, as it
chooses only the most significant unit (such as year, week, or hour) of the
difference, and displays that:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">babel.dates</span> <span class="kn">import</span> <span class="n">format_timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_timedelta</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en_US&#39;</span><span class="p">)</span>
<span class="go">u&#39;1 week&#39;</span>
</pre></div>
</div>
<p>The resulting strings are based from the CLDR data, and are properly
pluralized depending on the plural rules of the locale and the calculated
number of units.</p>
<p>The function provides parameters for you to influence how this most significant
unit is chosen: with <code class="docutils literal"><span class="pre">threshold</span></code> you set the value after which the
presentation switches to the next larger unit, and with <code class="docutils literal"><span class="pre">granularity</span></code> you
can limit the smallest unit to display:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_timedelta</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en_US&#39;</span><span class="p">)</span>
<span class="go">u&#39;6 days&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_timedelta</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span> <span class="n">granularity</span><span class="o">=</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en_US&#39;</span><span class="p">)</span>
<span class="go">u&#39;1 month&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="time-zone-support">
<span id="timezone-support"></span><h2>Time-zone Support<a class="headerlink" href="#time-zone-support" title="Permalink to this headline">¶</a></h2>
<p>Many of the verbose time formats include the time-zone, but time-zone
information is not by default available for the Python <code class="docutils literal"><span class="pre">datetime</span></code> and
<code class="docutils literal"><span class="pre">time</span></code> objects. The standard library includes only the abstract <code class="docutils literal"><span class="pre">tzinfo</span></code>
class, which you need appropriate implementations for to actually use in your
application. Babel includes a <code class="docutils literal"><span class="pre">tzinfo</span></code> implementation for UTC (Universal
Time).</p>
<p>Babel uses <a class="reference external" href="http://pytz.sourceforge.net/">pytz</a> for real timezone support which includes the
definitions of practically all of the time-zones used on the world, as
well as important functions for reliably converting from UTC to local
time, and vice versa.  The module is generally wrapped for you so you can
directly interface with it from within Babel:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">babel.dates</span> <span class="kn">import</span> <span class="n">get_timezone</span><span class="p">,</span> <span class="n">UTC</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mo">04</span><span class="p">,</span> <span class="mo">01</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">UTC</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eastern</span> <span class="o">=</span> <span class="n">get_timezone</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_datetime</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="s1">&#39;H:mm Z&#39;</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">eastern</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en_US&#39;</span><span class="p">)</span>
<span class="go">u&#39;11:30 -0400&#39;</span>
</pre></div>
</div>
<p>The recommended approach to deal with different time-zones in a Python
application is to always use UTC internally, and only convert from/to the users
time-zone when accepting user input and displaying date/time data, respectively.
You can use Babel together with <code class="docutils literal"><span class="pre">pytz</span></code> to apply a time-zone to any
<code class="docutils literal"><span class="pre">datetime</span></code> or <code class="docutils literal"><span class="pre">time</span></code> object for display, leaving the original information
unchanged:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">british</span> <span class="o">=</span> <span class="n">get_timezone</span><span class="p">(</span><span class="s1">&#39;Europe/London&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_datetime</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="s1">&#39;H:mm zzzz&#39;</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">british</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="s1">&#39;en_US&#39;</span><span class="p">)</span>
<span class="go">u&#39;16:30 British Summer Time&#39;</span>
</pre></div>
</div>
<p>Here, the given UTC time is adjusted to the &#8220;Europe/London&#8221; time-zone, and
daylight savings time is taken into account. Daylight savings time is also
applied to <code class="docutils literal"><span class="pre">format_time</span></code>, but because the actual date is unknown in that
case, the current day is assumed to determine whether DST or standard time
should be used.</p>
<p>For many timezones it&#8217;s also possible to ask for the next timezone
transition.  This for instance is useful to answer the question âwhen do I
have to move the clock forward nextâ:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">get_next_timezone_transition</span><span class="p">(</span><span class="s1">&#39;Europe/Vienna&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">&lt;TimezoneTransition CET -&gt; CEST (2011-03-27 01:00:00)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">from_offset</span>
<span class="go">3600.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">to_offset</span>
<span class="go">7200.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">from_tz</span>
<span class="go">&#39;CET&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">to_tz</span>
<span class="go">&#39;CEST&#39;</span>
</pre></div>
</div>
<p>Lastly Babel also provides support for working with the local timezone of
your operating system.  It&#8217;s provided through the <code class="docutils literal"><span class="pre">LOCALTZ</span></code> constant:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">babel.dates</span> <span class="kn">import</span> <span class="n">LOCALTZ</span><span class="p">,</span> <span class="n">get_timezone_name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LOCALTZ</span>
<span class="go">&lt;DstTzInfo &#39;Europe/Vienna&#39; CET+1:00:00 STD&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_timezone_name</span><span class="p">(</span><span class="n">LOCALTZ</span><span class="p">)</span>
<span class="go">u&#39;Central European Time&#39;</span>
</pre></div>
</div>
<div class="section" id="localized-time-zone-names">
<h3>Localized Time-zone Names<a class="headerlink" href="#localized-time-zone-names" title="Permalink to this headline">¶</a></h3>
<p>While the <code class="docutils literal"><span class="pre">Locale</span></code> class provides access to various locale display names
related to time-zones, the process of building a localized name of a time-zone
is actually quite complicated. Babel implements it in separately usable
functions in the <code class="docutils literal"><span class="pre">babel.dates</span></code> module, most importantly the
<code class="docutils literal"><span class="pre">get_timezone_name</span></code> function:</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">babel</span> <span class="kn">import</span> <span class="n">Locale</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">babel.dates</span> <span class="kn">import</span> <span class="n">get_timezone_name</span><span class="p">,</span> <span class="n">get_timezone</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tz</span> <span class="o">=</span> <span class="n">get_timezone</span><span class="p">(</span><span class="s1">&#39;Europe/Berlin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_timezone_name</span><span class="p">(</span><span class="n">tz</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;pt_PT&#39;</span><span class="p">))</span>
<span class="go">u&#39;Hora da Europa Central&#39;</span>
</pre></div>
</div>
<p>You can pass the function either a <code class="docutils literal"><span class="pre">datetime.tzinfo</span></code> object, or a
<code class="docutils literal"><span class="pre">datetime.date</span></code> or <code class="docutils literal"><span class="pre">datetime.datetime</span></code> object. If you pass an actual date,
the function will be able to take daylight savings time into account. If you
pass just the time-zone, Babel does not know whether daylight savings time is
in effect, so it uses a generic representation, which is useful for example to
display a list of time-zones to the user.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">tz</span><span class="o">.</span><span class="n">localize</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2007</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_timezone_name</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;de_DE&#39;</span><span class="p">))</span>
<span class="go">u&#39;Mitteleurop\xe4ische Sommerzeit&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_timezone_name</span><span class="p">(</span><span class="n">tz</span><span class="p">,</span> <span class="n">locale</span><span class="o">=</span><span class="n">Locale</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;de_DE&#39;</span><span class="p">))</span>
<span class="go">u&#39;Mitteleurop\xe4ische Zeit&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Gunter Hermann, Vincent Pohl, and Axel Schild.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.2.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>